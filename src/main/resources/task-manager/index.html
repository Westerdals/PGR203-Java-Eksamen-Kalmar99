<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KristianiaProject</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Task Manager</h1>

<div id="menu">
    <a href="newMember.html">Add New Member</a>
    <a href="removeMember.html">Remove member</a>
    <a href="newProjectTask.html">Add new project task</a>
    <a href="removeProject.html">remove project task</a>
    <a href="newStatus.html">Add new status</a>
    <a href="removeStatus.html">Add new status</a>

</div>

<h3>
    Members:
    <hr>
</h3>
<table id="projectMembers"></table>

<h3>Project Tasks With assigned members</h3>
<hr>
<table id="projects">

</table>

<h3>Add Member to Project Task</h3>
<form method="POST" action="/api/members/projectMember" >
    <label>Member <select id="memberSelect" name="memberSelect"></select> </label>
    <label>Task <select id="taskSelect" name="TaskSelect"></select> </label>
    <button>Add</button>
</form>
<h3>Change Status</h3>
<form method="POST" action="/api/status/edit" >

    <span style="display:none">
    <input type="number" id="nid" name="sid">
    <input type="number" id="sid" name="sid2">
    </span>
    <script>
        function updateId()
        {
            var option = document.getElementById("taskSelect2");
            var id = option[option.selectedIndex].id;
            document.getElementById("nid").value = id;

            var option = document.getElementById("statusSelect");
            var id = option[option.selectedIndex].id;
            document.getElementById("sid").value = id;
        }
    </script>
    <label>Task <select id="taskSelect2"></select> </label>
    <label>Task <select id="statusSelect"></select> </label>
    <button onclick="updateId()">Add</button>
</form>


<h3>All Tasks</h3>
<hr>
<table id="projectsWithOutMembers">

</table>
</body>
<script>
    fetch("/api/members/add")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        text = "<tr>\n" +
                "<th>Id</th>" +
        "        <th>Name</th>\n" +
        "        <th>Email</th>\n" +
        "    </tr>  " + text;
        document.getElementById("projectMembers").innerHTML = text.toString();
    });


    fetch("/api/members/projectMember")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        text = "<tr>\n" +
                "<th>Name</th>" +
            "        <th>Status</th>\n" +
            "        <th>Members</th>\n" +
            "    </tr>  " + text;
        document.getElementById("projects").innerHTML = text.toString();
    });

    fetch("/api/members/select")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        document.getElementById("memberSelect").innerHTML = text.toString();
    });

    fetch("/api/status/select")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        document.getElementById("statusSelect").innerHTML = text.toString();
    });



    fetch("/api/projects/select")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        document.getElementById("taskSelect").innerHTML = text.toString();
    });

    fetch("/api/projects/select")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        document.getElementById("taskSelect2").innerHTML = text.toString();
    });

    fetch("/api/projects/add")
        .then(function(response) {
            return response.text();
        }).then(function(text) {
        text = "<tr>\n" +
            "<th>ID</th>" +
            "        <th>Name</th>\n" +
            "        <th>Status</th>\n" +
            "    </tr>  " + text;
        document.getElementById("projectsWithOutMembers").innerHTML = text.toString();
    });



</script>
</html>